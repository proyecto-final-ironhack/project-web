(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(68)},40:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),l=a.n(s),c=(a(38),a(39),a(40),a(3)),i=a(4),o=a(6),m=a(5),u=a(7),d=a(2),p=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(d.b,{className:"navbar-brand",to:"/"},"Image Recognition"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03"},r.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(d.b,{className:"nav-link",to:"/users"},"Users ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/images"},"Camera"))),r.a.createElement("ul",{className:"navbar-nav my-2 my-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.c,{className:"nav-link",activeClassName:"active",to:"/register"},"Register")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.c,{className:"nav-link",activeClassName:"active",to:"/login"},"Login")))))},h=a(14),b=a(13),v=a(9),g=a(17),f=a.n(g),E=f.a.create({baseURL:"http://localhost:3001",withCredentials:!0}),N={authenticate:function(e){return E.post("/authenticate",e).then(function(e){return e.data})},register:function(e){return E.post("/register",e).then(function(e){return e.data})},logout:function(){return E.post("/logout").then(function(e){return e.data})}},j=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,w={email:function(e){var t;return e?j.test(e)||(t="Invalid email pattern"):t="Email is required",t},password:function(e){var t;return e||(t="Password is required"),t}},y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{email:"",password:""},errors:{email:w.email(),password:w.password()},touch:{},isAuthenticated:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({user:Object(v.a)({},a.state.user,Object(b.a)({},n,r)),errors:Object(v.a)({},a.state.errors,Object(b.a)({},n,w[n]&&w[n](r)))})},a.handleBlur=function(e){var t=e.target.name;a.setState({touch:Object(v.a)({},a.state.touch,Object(b.a)({},t,!0))})},a.handleSubmit=function(e){e.preventDefault(),a.isValid()&&N.authenticate(a.state.user).then(function(e){return a.setState({isAuthenticated:!0})},function(e){var t=e.response.data,n=t.message,r=t.errors;a.setState({errors:Object(v.a)({},r,{password:!r&&n}),touch:Object(v.a)({},r,{password:!r&&n})})})},a.isValid=function(){return!Object.keys(a.state.user).some(function(e){return a.state.errors[e]})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,a=e.errors,n=e.user,s=e.touch;return t?r.a.createElement(h.a,{to:"/users"}):r.a.createElement("div",{className:"row justify-content-center mt-5"},r.a.createElement("div",{className:"col-xs-12 col-sm-4"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-envelope-o"}))),r.a.createElement("input",{type:"text",className:"form-control ".concat(s.email&&a.email&&"is-invalid"),name:"email",placeholder:"Email",onChange:this.handleChange,value:n.email,onBlur:this.handleBlur}),r.a.createElement("div",{className:"invalid-feedback"},a.email)),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text",style:{width:"42px"}},r.a.createElement("i",{className:"fa fa-lock"}))),r.a.createElement("input",{type:"password",className:"form-control ".concat(s.password&&a.password&&"is-invalid"),name:"password",placeholder:"Password",onChange:this.handleChange,value:n.password,onBlur:this.handleBlur}),r.a.createElement("div",{className:"invalid-feedback"},a.password)),r.a.createElement("div",{className:"from-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:!this.isValid()},"Login"))),r.a.createElement("hr",null),r.a.createElement("p",{className:"text-center"},"Don't have an account? ",r.a.createElement(d.b,{to:"/register"},"Sign up"))))}}]),t}(n.Component),O=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,k={name:function(e){var t;return e||(t="Name is required"),t},email:function(e){var t;return e?O.test(e)||(t="Invalid email pattern"):t="Email is required",t},password:function(e){var t;return e||(t="Password is required"),t}},C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{name:"",email:"",password:""},errors:{name:k.name(),email:k.email(),password:k.password()},touch:{},isRegistered:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({user:Object(v.a)({},a.state.user,Object(b.a)({},n,r)),errors:Object(v.a)({},a.state.errors,Object(b.a)({},n,k[n]&&k[n](r)))})},a.handleBlur=function(e){var t=e.target.name;a.setState({touch:Object(v.a)({},a.state.touch,Object(b.a)({},t,!0))})},a.handleSubmit=function(e){e.preventDefault(),a.isValid()&&N.register(a.state.user).then(function(e){return a.setState({isRegistered:!0})},function(e){var t=e.response.data,n=t.message,r=t.errors;a.setState({errors:Object(v.a)({},r,{email:!r&&n}),touch:Object(v.a)({},r,{email:!r&&n})})})},a.isValid=function(){return!Object.keys(a.state.user).some(function(e){return a.state.errors[e]})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isRegistered,a=e.errors,n=e.user,s=e.touch;return t?r.a.createElement(h.a,{to:"/login"}):r.a.createElement("div",{className:"row justify-content-center mt-5"},r.a.createElement("div",{className:"col-xs-12 col-sm-4"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text",style:{width:"42px"}},r.a.createElement("i",{className:"fa fa-user"}))),r.a.createElement("input",{type:"text",className:"form-control ".concat(s.name&&a.name&&"is-invalid"),name:"name",placeholder:"Name",onChange:this.handleChange,value:n.name,onBlur:this.handleBlur}),r.a.createElement("div",{className:"invalid-feedback"},a.name)),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-envelope-o"}))),r.a.createElement("input",{type:"text",className:"form-control ".concat(s.email&&a.email&&"is-invalid"),name:"email",placeholder:"Email",onChange:this.handleChange,value:n.email,onBlur:this.handleBlur}),r.a.createElement("div",{className:"invalid-feedback"},a.email)),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text",style:{width:"42px"}},r.a.createElement("i",{className:"fa fa-lock"}))),r.a.createElement("input",{type:"password",className:"form-control ".concat(s.password&&a.password&&"is-invalid"),name:"password",placeholder:"Password",onChange:this.handleChange,value:n.password,onBlur:this.handleBlur}),r.a.createElement("div",{className:"invalid-feedback"},a.password)),r.a.createElement("div",{className:"from-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:!this.isValid()},"Register"))),r.a.createElement("hr",null),r.a.createElement("p",{className:"text-center"},"Already registered? ",r.a.createElement(d.b,{to:"/login"},"Login"))))}}]),t}(n.Component),x={list:function(){return E.get("/users").then(function(e){return e.data})},deleteUser:function(e){return E.delete("/users/".concat(e)).then(function(e){return e.data})}},S={images:function(e){return E.post("/images",{photo:e}).then(function(e){return e.data})}},B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(e){x.deleteUser(e).then(function(){return a.props.onClickDelete(e)})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.email,s=e.role;return r.a.createElement("li",{key:t,className:"list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",null,r.a.createElement("i",{className:"mr-2 fa fa-times text-danger",onClick:this.handleDelete.bind(this,t)}),a,r.a.createElement("small",{className:"ml-2"},n)),r.a.createElement("span",{className:"badge badge-pill badge-".concat("admin"===s?"danger":"primary")},s))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},a.handleDeleteUser=function(e){a.setState({users:a.state.users.filter(function(t){return t.id!==e})})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.list().then(function(t){return e.setState({users:t})})}},{key:"render",value:function(){var e=this,t=this.state.users.map(function(t){return r.a.createElement(B,Object.assign({key:t.id},t,{onClickDelete:e.handleDeleteUser}))});return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("ul",{className:"list-group mt-5"},t)))}}]),t}(n.Component),A=a(32),R=a.n(A),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedFile:null,message:""},a.setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();e=e.split(",")[1],S.images(e).then(function(e){return a.setState({message:e.description})},function(e){return console.error(e)})},a.fileChangedHandler=function(e){a.setState({selectedFile:e.target.files[0]})},a.uploadHandler=function(){var e=new FormData;e.append("myFile",a.state.selectedFile,a.state.selectedFile.name),f.a.post("http://localhost:3001/images",e)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"container"},r.a.createElement(R.a,{audio:!1,height:250,ref:this.setRef,screenshotFormat:"image/jpeg",width:290,videoConstraints:{width:1280,height:720,facingMode:"user"}}),r.a.createElement("button",{onClick:this.capture,className:"btn btn-primary btn-lg btn-block"},"Make your photo!"),r.a.createElement("div",{className:"display-message"},r.a.createElement("p",null,this.state.message)),r.a.createElement("input",{type:"file",onChange:this.fileChangedHandler}),r.a.createElement("button",{onClick:this.uploadHandler},"Upload!"))}}]),t}(n.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.b,{className:"btn btn-primary btn-lg btn-block",to:"/images"},"Tell me what's this!"),r.a.createElement(d.b,{className:"btn btn-primary btn-lg btn-block",to:"/images"},"Find this object!"))}}]),t}(n.Component),V=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(p,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/register",component:C}),r.a.createElement(h.b,{exact:!0,path:"/login",component:y}),r.a.createElement(h.b,{exact:!0,path:"/users",component:D}),r.a.createElement(h.b,{exact:!0,path:"/images",component:F}),r.a.createElement(h.b,{exact:!0,path:"/",component:U})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(d.a,{basename:"https://proyecto-final-ironhack.github.io/project-web"},r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.74a6215b.chunk.js.map